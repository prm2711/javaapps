package com.zilker.delegate;

import java.util.ArrayList;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.zilker.dao.FindPlayerMatches;
import com.zilker.dao.FindPlayerName;
import com.zilker.dto.MatchWithName;

public class PlayerMatchDelegate {
   
	public boolean checkValidity(HttpServletRequest request, HttpServletResponse response) {
		String player = request.getParameter("player");
		FindPlayerName findPlayer = new FindPlayerName();
		FindPlayerMatches findPlayerMatch = new FindPlayerMatches();
		ArrayList<MatchWithName> matchname = new ArrayList<MatchWithName>();
		int playerid;
		if (player.isEmpty()==true) {
			response.getWriter().append("Field Empty");
			
		} else {

			playerid = findPlayer.retrievePlayerID(player);

			if (playerid == -1) {
				response.getWriter().append("Enter valid Player");
				rd = request.getRequestDispatcher("playermatch.jsp");
				rd.include(request, response);
			} else {
				matchname = findPlayerMatch.retrieveMatch(playerid);
				if(matchname.isEmpty()==false) {
				rd = request.getRequestDispatcher("matchesplayer.jsp");
				request.setAttribute("list", matchname);
				rd.forward(request, response);
				}
				else {
					rd = request.getRequestDispatcher("playermatch.jsp");
					response.getWriter().append("No match");
					rd.include(request, response);
				}
			}
	}
}
